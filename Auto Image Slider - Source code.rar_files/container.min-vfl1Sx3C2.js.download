define(["require","exports","tslib","prop-types","react","modules/clean/auth/login_or_register/types","modules/clean/react/file_viewer/file_viewer","modules/clean/open_in_app/actions","modules/clean/sharing/async_share_modal_util","modules/clean/viewer","modules/clean/react/file_viewer/data/store","modules/clean/web_timing_logger","modules/clean/react/extensions/data/store","modules/clean/integrations/zoom_share_dialog/async_modal"],(function(e,t,i,r,o,n,s,a,l,d,u,c,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r);var _=(function(t){function _(e){var i=t.call(this,e)||this,r=d.Viewer.get_viewer(),o=e.userId?r.get_user_by_id(e.userId):r.work_user||r.personal_user;i.state={user:o},c.log_js_modules_application_code_start();var n=e.file,s=u.getStoreForFileViewer();return u.hydrateFileViewerNamespace(s,{file:n},o),o&&p.initializeStore(o,[n]),i}return i.__extends(_,t),_.prototype.componentDidMount=function(){var t=this,r=this.props,s=r.shareEmail,d=r.file;if(s&&this.state.user)new Promise((function(t,i){e(["modules/clean/react/browse/models"],t,i)})).then(i.__importStar).then((function(e){var i=e.File;l.asyncShowPrefilledShareModal({user:t.state.user,sharePrefillEmails:[s],content:new i(t.props.file)})}));else if(this.props.authModalKind!==n.LoginOrRegisterKind.IMMEDIATE||this.state.user)this.props.presentInZoom&&this.state.user&&m.asyncShowModal(this.state.user.id,d.file_id,"file-viewer-modal-overlay","desktop");else{i.__awaiter(t,void 0,void 0,(function(){var t,r,s;return i.__generator(this,(function(a){switch(a.label){case 0:return[4,Promise.all([new Promise((function(t,i){e(["modules/clean/react/modal"],t,i)})).then(i.__importStar),new Promise((function(t,i){e(["modules/clean/auth/login_or_register/modal"],t,i)})).then(i.__importStar)])];case 1:return t=a.sent(),r=t[0].Modal,s=t[1].LoginOrRegisterModal,r.showInstance(o.default.createElement(s,{downloadAction:null,id:"shared-link-immediate-signup-modal",initialMode:n.Mode.REGISTER,kind:n.LoginOrRegisterKind.IMMEDIATE,onAuthenticateSuccess:function(){},onCancel:function(){},signup_tag:"shmodel_modal_register",showAppleLogin:!1})),[2]}}))}))}if(this.props.openImmediatelyInApp){var u=this.props.file;a.openImmediately(u.open_in_app_data)}},_.prototype.render=function(){var e=this.props,t=e.fileViewerProps,r=e.onCloseUrl,n=e.isEmbedded,a=e.sharedLinkInfo,l=e.shareToken,d=e.sharePermission,u=o.default.createElement(s.FileViewer,i.__assign({},t,{fileCount:1,fileIndex:0,titleBarCloseUrl:r,sharedLinkInfo:a,shareToken:l,sharePermission:d,user:this.state.user,transparentBackground:!1}));return n?o.default.createElement("div",{className:"embedded"},u):u},_.prototype.getChildContext=function(){return{authModalKind:this.props.authModalKind}},_.childContextTypes={authModalKind:r.default.oneOf(["download","immediate",null])},_})((o=i.__importDefault(o)).default.Component);t.FileViewerContainer=_}));
//# sourceMappingURL=container.min.js-vflAeiaEJ.map